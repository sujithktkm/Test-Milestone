# Test-Milestone

###Introduction

For this milestone, we have used Jenkins Application and have configured it to work for our requirements.

Breaking down the configurations made for each of the tasks,

#####Task 1 : The ability to run unit tests, measure coverage, and report the results.
To measure coverage, we made use of [Cobertura] plugin. This plugin helps in measuring code coverage for different metrics like classes, packages, lines, conditions, files and methods. 

To use this plugin, 
- We installed it using the manage plugins tab in Jenkins Configurations Dashboard. 
- Configured Build Step in our project, to use maven script

```sh
cobertura:cobertura -Dcobertura.report.format=xml to use Cobertura.
```

- Published the results into files using a post build step - 
```sh
**/target/site/cobertura/*.xml
```

In the coverage report section of the job, we observed the coverage report obtained and it is classified into different metrics like classes, packages, lines, conditions, files and methods. And the report can be drilled into each sub folder in the project and to each file.

![image1](/screenshots/SS1.jpg)
![image2](/screenshots/SS2.jpg)
![image3](/screenshots/SS3.jpg)
![image4](/screenshots/SS4.jpg)
![image10](/screenshots/SS10.jpg)
![image11](/screenshots/SS11.jpg)

To run the test cases, we used [JUnit] plugin and made use of maven scripts. We installed JUnit plugin from the Jenkins dashboard, configured it in the job configurations and it executed test cases using the Maven command
```sh
mvn test
```


To report the results, in the post build step, we configured cobertura and JUnit to obtain the reports as .xml files.

#####Task 2 : The ability to improve testing coverage using one of the techniques covered in class: constraint-based test generation, fuzzing, etc. You can use an existing tool or implement your own approach.

For Task 2, we used codepro eclipse plugin to improve generate new test cases and improve code coverage. [Codepro]
Employ the comprehensive automated software code quality and security analysis toolkit CodePro AnalytiX to automatically improve software quality, reliability, and maintainability in developer applications. CodePro AnalytiX includes functionality previously provided by EclipsePro Audit and EclipsePro Test.

Steps followed were - 
- Installed plugins codepro on eclipse.
- Create a project and use this plug in to generate new test cases. Add these test cases to repository.
- The increment in the code coverage is visible in the below images.


We compared the test coverage obtained before and after addind the test cases generated by codepro and observed that the test coverage has increased by a considerable amount.

![image91](/screenshots/cov1.JPG)
![image92](/screenshots/cov2.JPG)


#####Task 3 : The ability to run an existing static analysis tool on the source code, process its results, and report its findings.

For Task 3, we used [FindBugs] to perform static analysis on source code.

Steps involved are
- Installed FindBugs plugin and configured it as per project requirements.
- Added a build step in the job for Findbugs to work on the project
- Added a post build step to record the results in a .xml file

![image5](/screenshots/SS5.jpg)
![image6](/screenshots/SS6.jpg)
![image7](/screenshots/SS7.jpg)
![image8](/screenshots/SS8.jpg)

#####Task 4 : The ability to extend an existing analysis tool with a custom rule, or implement a new analysis.
To implement a new analysis - we used the sample code available at http://users.csc.calpoly.edu/~jdalbey/308/Resources/JCC.java.

This code helps to find out code to comment ratio.

To perform this task, we created a jar using the code available at the above link and added a dependency in our Maven project.
This code executes and identifies the code to comment ratio. As we have added a git hook for pre commit, the build is triggered and for each build, this ratio is identified.
The below image shows the number of comments line as well as the number of code lines in the project. Then it displays the ratio.

![image93](/screenshots/task4.jpg)


#####Task 5 : The ability to reject a commit if it fails a minimum testing criteria and analysis criteria

We have added threshold limits to Jenkins findbugs and cobertura plugins to reject a commit if it doesn't par the given thresholds and to accept the commit if they are above the same.
The values can be set in the post build step under advanced actions for each of them. Both have options to add values for unstable and reject builds.
For cobertura, we need to check the fail unstable/ unhealthy build checkbox.

Cobertura
![image12](/screenshots/task5-1.jpg)
![image13](/screenshots/task5-2.jpg)

Findbugs
![image14](/screenshots/task5-3.jpg)
![image14](/screenshots/task5-4.jpg)

[Cobertura]: https://wiki.jenkins-ci.org/display/JENKINS/Cobertura+Plugin
[JUnit]: https://wiki.jenkins-ci.org/display/JENKINS/JUnit+Plugin
[Findbugs] : https://wiki.jenkins-ci.org/display/JENKINS/FindBugs+Plugin
[Codepro] : https://developers.google.com/java-dev-tools/download-codepro
